{"ast":null,"code":"var _jsxFileName = \"/home/alta4/Desktop/livecode_react/src/pages/Signin.jsx\";\nimport React from 'react';\nimport Header from '../components/header';\nimport SigninSection from '../components/signin';\nimport axios from 'axios';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'unistore/react';\nimport { actions, store } from '../store';\nimport { Redirect, Link } from 'react-router-dom';\n\nclass Signin extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLogin = () => {\n      const self = this;\n      axios.post('https://api-todofancy.herokuapp.com/api/auth').then(function (response) {\n        console.log(response.data); // if (response.data.hasOwnProperty('api_key')){\n        //     localStorage.setItem('fullname', response.data.fullname)\n        //     localStorage.setItem('email', response.data.email)\n        //     localStorage.setItem('status_login', true)\n        //     self.props.history.push(\"/profile\")\n        // }\n\n        if (response.data.status === 'oke') {\n          store.setState({\n            fullname: response.data.fullname,\n            email: response.data.email,\n            status_login: response.data.status_login\n          });\n          self.props.history.push(\"/profile\");\n        }\n      }).catch(function (error) {});\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(SigninSection, {\n      masukan: e => this.handleMasukan(e),\n      login: this.handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"Back to Home\")));\n  }\n\n}\n\nexport default connect(actions)(withRouter(Signin));","map":{"version":3,"sources":["/home/alta4/Desktop/livecode_react/src/pages/Signin.jsx"],"names":["React","Header","SigninSection","axios","withRouter","connect","actions","store","Redirect","Link","Signin","Component","handleLogin","self","post","then","response","console","log","data","status","setState","fullname","email","status_login","props","history","push","catch","error","render","e","handleMasukan"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,OAAR,QAAsB,gBAAtB;AACA,SAAQC,OAAR,EAAiBC,KAAjB,QAA6B,UAA7B;AACA,SAAQC,QAAR,EAAkBC,IAAlB,QAA6B,kBAA7B;;AAEA,MAAMC,MAAN,SAAqBV,KAAK,CAACW,SAA3B,CAAoC;AAAA;AAAA;;AAAA,SAKhCC,WALgC,GAKlB,MAAK;AACf,YAAMC,IAAI,GAAG,IAAb;AACAV,MAAAA,KAAK,CACAW,IADL,CACU,8CADV,EAEKC,IAFL,CAEU,UAASC,QAAT,EAAkB;AACpBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EADoB,CAEpB;AACA;AACA;AACA;AACA;AACA;;AACA,YAAIH,QAAQ,CAACG,IAAT,CAAcC,MAAd,KAAyB,KAA7B,EAAmC;AAC/Bb,UAAAA,KAAK,CAACc,QAAN,CAAe;AACXC,YAAAA,QAAQ,EAAGN,QAAQ,CAACG,IAAT,CAAcG,QADd;AAEXC,YAAAA,KAAK,EAAGP,QAAQ,CAACG,IAAT,CAAcI,KAFX;AAGXC,YAAAA,YAAY,EAAGR,QAAQ,CAACG,IAAT,CAAcK;AAHlB,WAAf;AAKAX,UAAAA,IAAI,CAACY,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACH;AACJ,OAlBL,EAmBKC,KAnBL,CAmBW,UAASC,KAAT,EAAe,CACrB,CApBL;AAqBH,KA5B+B;AAAA;;AA8BhCC,EAAAA,MAAM,GAAE;AACJ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGI,oBAAC,aAAD;AACA,MAAA,OAAO,EAAEC,CAAC,IAAE,KAAKC,aAAL,CAAmBD,CAAnB,CADZ;AAEA,MAAA,KAAK,EAAI,KAAKnB,WAFd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,EAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADA,CAPJ,CADJ;AAaH;;AA5C+B;;AA8CpC,eAAeP,OAAO,CAClBC,OADkB,CAAP,CAEbF,UAAU,CAACM,MAAD,CAFG,CAAf","sourcesContent":["import React from 'react'\nimport Header from '../components/header'\nimport SigninSection from '../components/signin'\nimport axios from 'axios'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'unistore/react'\nimport {actions, store} from '../store'\nimport {Redirect, Link} from 'react-router-dom'\n\nclass Signin extends React.Component{\n    // handleMasukan = (e) =>{\n    //     const self = this\n    //     store.setState({[e.target.name] : e.target.value})\n    // }\n    handleLogin = () =>{\n        const self = this\n        axios\n            .post('https://api-todofancy.herokuapp.com/api/auth')\n            .then(function(response){\n                console.log(response.data)\n                // if (response.data.hasOwnProperty('api_key')){\n                //     localStorage.setItem('fullname', response.data.fullname)\n                //     localStorage.setItem('email', response.data.email)\n                //     localStorage.setItem('status_login', true)\n                //     self.props.history.push(\"/profile\")\n                // }\n                if (response.data.status === 'oke'){\n                    store.setState({\n                        fullname : response.data.fullname, \n                        email : response.data.email,\n                        status_login : response.data.status_login,\n                    })\n                    self.props.history.push(\"/profile\")\n                }\n            })\n            .catch(function(error){\n            })\n    }\n    \n    render(){\n        return(\n            <div>\n                {/* <Header category = {e => this.handleCategory(e)}\n                {...this.props}/> */}\n                <SigninSection\n                masukan={e=>this.handleMasukan(e)}\n                login = {this.handleLogin}\n                />\n                <div>\n                <Link to=\"/\">Back to Home</Link>\n                </div>\n            </div>\n        )\n    }\n}\nexport default connect(\n    actions\n)(withRouter(Signin))"]},"metadata":{},"sourceType":"module"}